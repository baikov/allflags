{% extends "base.html" %}
{% load i18n my_filter humanize %}
{% load static %}
{% get_media_prefix as MEDIA_URL %}

{% block breadcrumb %}
{# Breadcrumbs #}
<div class="pt-3 bg-light">
    <div class="container">
        <nav aria-label="breadcrumb">
            <ol class="breadcrumb" vocab="https://schema.org/" typeof="BreadcrumbList">
                <li class="breadcrumb-item" property="itemListElement" typeof="ListItem">
                    <a property="item" typeof="WebPage" href="{{ request.scheme }}://{{ request.META.HTTP_HOST }}">
                        <span property="name">Главная</span>
                    </a>
                    <meta property="position" content="1">
                </li>
                <li class="breadcrumb-item active" aria-current="page" property="itemListElement" typeof="ListItem">
                    <span property="name">Государственный флаг {{flag.country.ru_name_rod}} {{emoji}}</span>
                    <meta property="position" content="2">
                </li>
            </ol>
        </nav>
    </div>
</div>
{% endblock breadcrumb %}

{% block content %}
{# H1 #}
<div class="py-3 bg-light">
    <div class="container">
      <div class="row">
        <div class="col-12 d-flex justify-content-center">
          <h1>{% if flag.seo_h1%}{{flag.seo_h1}}{% else %}{{flag.title}}{%endif%}</h1>
        </div>
      </div>
    </div>
</div>

{# Main block #}
<div class="py-3 pb-xl-5 bg-light">
    <div class="container">
        <div class="row d-flex align-items-center">

            {% if main_picture %}
            {% with img=main_picture %}

            <div class="py-3 col-12 col-lg-5 d-flex justify-content-center">

            <div class="row">
                <div class="py-3 col-12 d-flex justify-content-center">
                    <picture itemscope itemtype="http://schema.org/ImageObject">
                        <meta itemprop="name" content="{{img.alt}}">
                        <meta itemprop="description" content="{{img.caption}}">
                        <meta itemprop="width" content="{{img.image.width}}px">
                        <meta itemprop="height" content="{{img.image.height}}px">

                        <source type="image/webp" srcset="{{img.webp_md.url}}, {{img.webp.url}} 2x" media="(min-width: 601px)">
                        <source type="{{img.source_type}}" srcset="{{img.image_md.url}}, {{img.image.url}} 2x" media="(min-width: 601px)">

                        <source type="image/webp" srcset="{{img.webp_xs.url}}, {{img.webp_md.url}} 2x" media="(max-width: 601px)">
                        <source type="{{img.source_type}}" srcset="{{img.image_xs.url}}, {{img.image_md.url}} 2x" media="(max-width: 601px)">

                        <img itemprop="contentUrl" src="{{img.image.url}}" alt="{{img.alt}}" title="{{img.caption}}" class="main-flag" width="{{img.image.width}}" height="{{img.image.height}}">

                    </picture>
                </div>
                <!--
                <div class="py-3 col-12 d-flex justify-content-center">
                    <a href="{{img.image.url}}" class="btn btn-outline-info btn-sm mx-2">
                        Скопировать код для вставки
                    </a>
                </div>
                -->
            </div>

            </div>
            {% endwith %}
            {% endif %}

            <div class="py-3 col-12 col-lg-7">
                <p>
                    {% if flag.country.conventional_long_name %}
                        {{ flag.country.conventional_long_name }}
                    {% else %}
                        {{flag.country.name}}
                    {% endif %} - государство, расположенное в регионе {{flag.country.region}},
                    столицей которого является город {{flag.country.ru_capital_name}}.
                </p>

                {% if flag.country.ru_motto %}
                <p>
                    Девиз {{flag.country.ru_name_rod}}: "{{flag.country.motto}}", что переводится как "{{flag.country.ru_motto}}".
                </p>
                {% endif %}

                {% if flag.adopted_date %}
                {% now "Y" as current_year %}
                <p>
                    Современный вариант национального флага {{flag.country.ru_name_rod}} был утвержден
                    {% language 'ru' %}{{flag.adopted_date|date:"j E Y"}}{% endlanguage %}.
                </p>
                <p>
                    В {{ current_year }} году флагу исполняется {{age}} лет.
                </p>
                {% endif %}

                {% if colors %}
                <p>
                    {% if colors|length == 1 %}
                        Единственный цвет флага: {{colors.0.color_group|lower}}.
                    {% else %}
                        {{colors|length|ru_count|capfirst}} основных {% if color_count > 4 %}цветов{% else %}цвета{% endif %} флага:
                        {% for color in colors %}{% if not forloop.first %}, {% endif %}{{color.color_group|lower}}{% endfor %}.
                    {% endif %}
                </p>
                {% else %}
                <p>Цвета флага не выбраны</p>
                {% endif %}
                {% if comp_colors %}
                <p>
                    Дополнительные цвета на флаге: {% for color in comp_colors %}{{color.color_group|lower}}{% endfor %}
                </p>
                {% endif %}

                {% if flag.proportion %}
                <p>
                    Флаг имеет пропорции {{flag.proportion}}
                </p>
                {% endif %}
                {% if emoji %}
                <p>
                    Emoji: {{emoji}}
                </p>
                {% endif %}
                {# Flag elements v2 here #}
            </div>

            {# Short description #}
            <div class="col-12">
                {% if flag.short_description %}
                <p>
                    {{flag.short_description|safe}}
                </p>
                {% endif %}
            </div>
        </div>
    </div>
</div>

{# Second menu for flag detail #}
<div class="sticky-top bg-light second-menu d-none d-lg-block">
    <div class="container">
            <ul class="nav align-items-baseline" id="navbar-scroll">
                <li class="nav-item">
                    <a class="nav-link" href="#main">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" class="bi bi-caret-up-square" viewBox="0 0 16 16">
                            <path d="M14 1a1 1 0 0 1 1 1v12a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1h12zM2 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2H2z"/>
                            <path d="M3.544 10.705A.5.5 0 0 0 4 11h8a.5.5 0 0 0 .374-.832l-4-4.5a.5.5 0 0 0-.748 0l-4 4.5a.5.5 0 0 0-.082.537z"/>
                        </svg>
                    </a>
                </li>
                {% if colors or flag.design_description %}
                <li class="nav-item">
                    <a class="nav-link" href="#colors">Цвета флага</a>
                </li>
                {% endif %}
                {% if same_flags %}
                <li class="nav-item">
                    <a class="nav-link" href="#same-colors">Похожие флаги</a>
                </li>
                {% endif %}
                {% if historical.exists or flag.history_text %}
                <li class="nav-item">
                    <a class="nav-link" href="#history">История</a>
                </li>
                {% endif %}
                {% if flag.facts.exists %}
                <li class="nav-item">
                    <a class="nav-link" href="#facts">Факты</a>
                </li>
                {% endif %}
                {% if files %}
                <li class="nav-item">
                    <a class="nav-link" href="#downloads">Скачать</a>
                </li>
                {% endif %}

                {% if flag.country.is_published %}
                <li class="nav-item">
                    <a class="nav-link" href="#country">О стране</a>
                </li>
                {% endif %}
                {% if neighbours.exists %}
                <li class="nav-item">
                    <a class="nav-link" href="#border-flags">Флаги соседей</a>
                </li>
                {% endif %}
            </ul>
    </div>
</div>

{# Colors & design v3#}
{% if colors.exists or flag.design_description %}
<div class="bg-white" id="colors">
    {# H2 #}
    {% include "partials/_h2.html" with h2="Цвета и дизайн государственного флага "|add:flag.country.ru_name_rod %}

    <div class="py-3 pt-xl-4 pb-xl-5">
        <div class="container">

            <div class="row">
                {# Colors tables #}
                {% if colors.exists %}
                <div class="py-3 col-12">
                    <div class="row">
                        {% for color in colors %}
                            {% if color.is_main %}
                            <div class="col-12 col-xs-6 col-sm-6 {% if colors|length < 3 %}col-md-6 col-lg-4{% elif colors|length < 4 %}col-md-4 col-lg-4{%else%}col-md-4 col-lg-3{%endif%}">
                                <table class="table table-hover table-sm table-bordered country_info"
                                    style="border: 2px solid #{%if color.hex|lower == 'ffffff'%}dee2e6{%else%}{{color.hex}}{%endif%} !important;">
                                    <thead>
                                        <tr class="text-center">
                                            <th colspan="3"
                                                style="background-color:#{{color.hex}}; border: 1px solid #{{color.hex}} !important;">
                                                <a href="{% url 'flags:color-detail' color.color_group.slug %}"
                                                    class="badge badge-light badge-100" data-toggle="tooltip" data-placement="top" title="Все флаги с этим цветом">
                                                    {{color.color_group}}

                                                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-info-square" viewBox="0 0 16 16">
                                                            <path d="M14 1a1 1 0 0 1 1 1v12a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1h12zM2 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2H2z"/>
                                                            <path d="m8.93 6.588-2.29.287-.082.38.45.083c.294.07.352.176.288.469l-.738 3.468c-.194.897.105 1.319.808 1.319.545 0 1.178-.252 1.465-.598l.088-.416c-.2.176-.492.246-.686.246-.275 0-.375-.193-.304-.533L8.93 6.588zM9 4.5a1 1 0 1 1-2 0 1 1 0 0 1 2 0z"/>
                                                        </svg>

                                                </a>
                                            </th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <th
                                                style="border: 2px solid #{%if color.hex|lower == 'ffffff'%}dee2e6{%else%}{{color.hex}}{%endif%} !important;">
                                                HEX</th>
                                            <td
                                                style="border: 2px solid #{%if color.hex|lower == 'ffffff'%}dee2e6{%else%}{{color.hex}}{%endif%} !important;">
                                                #{{color.hex|upper}}</td>
                                            <td class="text-center"
                                                style="border: 2px solid #{%if color.hex|lower == 'ffffff'%}dee2e6{%else%}{{color.hex}}{%endif%} !important;">
                                                <a data-clipboard-text="{{color.hex}}" class="cp" data-toggle="tooltip"
                                                    data-placement="top" title="Скопировать">
                                                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16"
                                                        fill="currentColor" class="bi bi-clipboard-plus"
                                                        viewBox="0 0 16 16">
                                                        <path fill-rule="evenodd"
                                                            d="M8 7a.5.5 0 0 1 .5.5V9H10a.5.5 0 0 1 0 1H8.5v1.5a.5.5 0 0 1-1 0V10H6a.5.5 0 0 1 0-1h1.5V7.5A.5.5 0 0 1 8 7z" />
                                                        <path
                                                            d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1h1a1 1 0 0 1 1 1V14a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V3.5a1 1 0 0 1 1-1h1v-1z" />
                                                        <path
                                                            d="M9.5 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3zm-3-1A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3z" />
                                                    </svg>
                                                </a>
                                            </td>
                                        </tr>
                                        <tr>
                                            <th
                                                style="border: 2px solid #{%if color.hex|lower == 'ffffff'%}dee2e6{%else%}{{color.hex}}{%endif%} !important;">
                                                RGB</th>
                                            <td
                                                style="border: 2px solid #{%if color.hex|lower == 'ffffff'%}dee2e6{%else%}{{color.hex}}{%endif%} !important;">
                                                rgb({%for val in color.rgb%}{{val}}{% if not forloop.last %},
                                                {% endif %}{%endfor%})</td>
                                            <td class="text-center"
                                                style="border: 2px solid #{%if color.hex|lower == 'ffffff'%}dee2e6{%else%}{{color.hex}}{%endif%} !important;">
                                                <a data-clipboard-text="rgb({%for val in color.rgb%}{{val}}{% if not forloop.last %}, {% endif %}{%endfor%})"
                                                    class="cp" data-toggle="tooltip" data-placement="top"
                                                    title="Скопировать">
                                                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16"
                                                        fill="currentColor" class="bi bi-clipboard-plus"
                                                        viewBox="0 0 16 16">
                                                        <path fill-rule="evenodd"
                                                            d="M8 7a.5.5 0 0 1 .5.5V9H10a.5.5 0 0 1 0 1H8.5v1.5a.5.5 0 0 1-1 0V10H6a.5.5 0 0 1 0-1h1.5V7.5A.5.5 0 0 1 8 7z" />
                                                        <path
                                                            d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1h1a1 1 0 0 1 1 1V14a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V3.5a1 1 0 0 1 1-1h1v-1z" />
                                                        <path
                                                            d="M9.5 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3zm-3-1A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3z" />
                                                    </svg>
                                                </a>
                                            </td>
                                        </tr>
                                        <tr>
                                            <th
                                                style="border: 2px solid #{%if color.hex|lower == 'ffffff'%}dee2e6{%else%}{{color.hex}}{%endif%} !important;">
                                                CMYK</th>
                                            <td colspan="2"
                                                style="border: 2px solid #{%if color.hex|lower == 'ffffff'%}dee2e6{%else%}{{color.hex}}{%endif%} !important;">
                                                {%for val in color.cmyk%}{{val}}%{% if not forloop.last %},
                                                {% endif %}{%endfor%}</td>
                                        </tr>
                                        {% if color.pantone %}
                                        <tr>
                                            <th
                                                style="border: 2px solid #{%if color.hex|lower == 'ffffff'%}dee2e6{%else%}{{color.hex}}{%endif%} !important;">
                                                Pantone</th>
                                            <td colspan="2"
                                                style="border: 2px solid #{%if color.hex|lower == 'ffffff'%}dee2e6{%else%}{{color.hex}}{%endif%} !important;">
                                                {{color.pantone}}</td>
                                        </tr>
                                        {% endif %}

                                    </tbody>
                                </table>
                            </div>
                            {% endif %}
                        {% endfor %}
                    </div>
                </div>

                {# Complementary colors v1 was here #}

                {# Colors count info #}
                <div class="py-3 col-12">
                    <div class="alert alert-primary" role="alert">
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor"
                            class="bi bi-info-square" viewBox="0 0 16 16">
                            <path
                                d="M14 1a1 1 0 0 1 1 1v12a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1h12zM2 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2H2z" />
                            <path
                                d="M8.93 6.588l-2.29.287-.082.38.45.083c.294.07.352.176.288.469l-.738 3.468c-.194.897.105 1.319.808 1.319.545 0 1.178-.252 1.465-.598l.088-.416c-.2.176-.492.246-.686.246-.275 0-.375-.193-.304-.533L8.93 6.588zM9 4.5a1 1 0 1 1-2 0 1 1 0 0 1 2 0z" />
                        </svg>
                        Список государственных флагов с
                        <a href="{% url 'flags:colors-count' colors.count %}" class="alert-link">
                            {{colors|length|ru_count:'t'}} {% if colors|length == 1 %}цветом{% else %}цветами{% endif %}
                        </a>
                    </div>
                </div>
                {% endif %}

            </div>
            <div class="row">

                {% if flag.design_description %}
                <div class="py-3 col-12 {% if flag.construction_image %}col-md-8 col-lg-8{%endif%}">
                    {{flag.design_description|safe}}

                </div>

                {% if flag.construction_image and flag.construction_webp %}
                <div class="col-12 col-md-4">
                    <h3 class="py-2">Схема флага</h3>

                    <figure class="figure">
                        <picture itemscope itemtype="http://schema.org/ImageObject">
                            <meta itemprop="name" content="{{flag.title}}">
                            <meta itemprop="description" content="Схема флага {{flag.country.ru_name_rod}}">
                            <meta itemprop="width" content="{{flag.construction_image.width}}px">
                            <meta itemprop="height" content="{{flag.construction_image.height}}px">

                            <source type="image/webp" srcset="{{flag.construction_webp_small.url}}, {{flag.construction_webp.url}} 2x">
                            <source type="{{flag.construction_source_type}}" srcset="{{lag.construction_image_small.url}}, {{flag.construction_image.url}} 2x">

                            <img itemprop="contentUrl" src="{{flag.construction_image.url}}" alt="Схема флага {{flag.country.ru_name_rod}}" title="Схема флага {{flag.country.ru_name_rod}}" class="figure-img img-fluid" width="{{flag.construction_image.width}}" height="{{flag.construction_image.height}}">
                        </picture>
                        <figcaption class="figure-caption pt-2 text-center">{{flag.title}}: схема</figcaption>
                    </figure>
                </div>
                {% endif %}
                    {# Flag elements v1 was here#}
                {% endif %}

                {# Colors meaning #}
                {% if colors.0.meaning %}
                <div class="col-12 {%if flag.elements.exists %}col-md-7 col-lg-7{%endif%}">
                    <h3>Наиболее популярные значения цветов</h3>
                    <ul class="list-unstyled">
                    {% for color in colors %}
                        <li><strong>{{color.color_group.name}}:</strong> {{color.meaning}}</li>
                    {% endfor %}
                    </ul>
                </div>
                {% endif %}

                {% if flag.elements.exists %}
                <div class="col-12 {%if colors.0.meaning%}col-md-5 col-lg-5{%endif%}">
                    <div class="card border-primary mb-3">
                        <div class="card-body text-primary">
                            <h3 class="text-dark text-center">Элементы флага</h3>
                            {% for element in flag.elements.all %}
                            <a href="{% url 'flags:element-detail' element.slug %}"
                                class="btn btn-outline-primary mb-2">{{element.name}}</a>
                            {% endfor %}
                        </div>
                    </div>
                </div>
                {% endif %}
            </div>
        </div>
    </div>
</div>
{% endif %}

{# Same color flags v2 #}
{% if same_flags %}
<div class="bg-light" id="same-colors">
    {# H2 #}
    {% include "partials/_h2.html" with h2="Флаги с похожими цветами" %}
    {# Flags list part #}
    {% include "partials/_flags-list.html" with flags=same_flags %}
</div>
{% endif %}

{% if test.exists %}
{% for elem in test %}
<p>{{elem}}</p>
{% endfor %}
{% endif %}
{{colors_adj}}

{# Historical flags and history text v4#}
{% if historical|length > 0 or flag.history_text %}
<div class="bg-white" id="history">
    {# H2 #}
    {% include "partials/_h2.html" with h2="Исторические флаги "|add:flag.country.ru_name_rod|add:" по годам" %}
    {# Content slider #}
    <div class="py-3 py-xl-5">
        <div class="container">
            <div class="row">
                <div class="col-3 col-md-2">
                    <div class="nav flex-column nav-pills" id="v-pills-tab" role="tablist" aria-orientation="vertical">
                        {% for h_flag in historical %}
                        <a class="nav-link{% if forloop.first %} active{% endif %}"
                            id="v-pills-{{ h_flag.id }}-tab"
                            data-toggle="pill"
                            href="#v-pills-{{ h_flag.id }}"
                            role="tab"
                            aria-controls="v-pills-{{ h_flag.id }}"
                            aria-selected="true">
                            {% if h_flag.from_year %}{{ h_flag.from_year }}{% else %}???{% endif %} - {% if h_flag.to_year %}{{ h_flag.to_year }}{% else %}???{% endif %}
                        </a>
                        {% endfor %}
                    </div>
                </div>
                <div class="col-9 col-md-10">
                    <div class="tab-content" id="v-pills-tabContent">
                        {% for h_flag in historical %}
                        <div class="tab-pane fade{% if forloop.first %} show active{% endif %}"
                            id="v-pills-{{ h_flag.id }}"
                            role="tabpanel"
                            aria-labelledby="v-pills-{{ h_flag.id }}-tab">
                            <div class="row justify-content-center">
                                <h3 class="pb-2 col-12 d-flex justify-content-center">{{h_flag.title}}</h3>

                                {# Historical flag images v4 #}
                                {% if h_flag.images.all %}
                                {% for img in h_flag.images.all %}
                                <div class="pb-4 col-6 col-md-4 col-lg-3">
                                    <figure class="figure w-100">
                                        <div class="historical-img">
                                        <picture itemscope itemtype="http://schema.org/ImageObject">
                                            <meta itemprop="name" content="{{img.alt}}">
                                            <meta itemprop="description" content="{{img.caption}}">
                                            <meta itemprop="width" content="{{img.image.width}}px">
                                            <meta itemprop="height" content="{{img.image.height}}px">

                                            <source type="image/webp" srcset="{{img.webp_md.url}}, {{img.webp.url}} 2x" media="(min-width: 601px)">
                                            <source type="{{img.source_type}}" srcset="{{img.image_md.url}}, {{img.image.url}} 2x" media="(min-width: 601px)">

                                            <source type="image/webp" srcset="{{img.webp_xs.url}}, {{img.webp_md.url}} 2x" media="(max-width: 601px)">
                                            <source type="{{img.source_type}}" srcset="{{img.image_xs.url}}, {{img.image_md.url}} 2x" media="(max-width: 601px)">

                                            <img itemprop="contentUrl" src="{{img.image.url}}" alt="{{img.alt}}" title="{{img.caption}}" class="image" width="{{img.image.width}}" height="{{img.image.height}}">

                                        </picture>
                                        </div>
                                        <figcaption class="figure-caption pt-2 text-center">{{img.caption}}</figcaption>
                                    </figure>
                                </div>
                                {% endfor %}
                                {% endif %}

                                <div class="col-12">
                                    {{h_flag.description|safe}}
                                </div>

                            </div>
                        </div>
                        {% endfor %}
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endif %}

{# Flag facts v2 #}
{% if flag.facts.exists %}
<div class="bg-light" id="facts">
    {# H2 #}
    {% include "partials/_h2.html" with h2="Интересные факты о флаге "|add:flag.country.ru_name_rod %}
    <div class="py-3 pt-xl-4 pb-xl-5">
        <div class="container">
            <div class="" itemscope itemtype="https://schema.org/FAQPage">
                <div class="accordion" id="FAQ">
                    {# Colors meaning v2 was here#}
                    {% for fact in flag.facts.all %}
                    <div class="card" itemscope itemprop="mainEntity" itemtype="https://schema.org/Question">
                        <div class="card-header" id="heading{{fact.id}}">
                            <h3 class="mb-0">
                                <button class="btn btn-link btn-block text-left" type="button" data-toggle="collapse" data-target="#collapse{{fact.id}}" aria-expanded="true" aria-controls="collapse{{fact.id}}">
                                    <span itemprop="name">{{fact.caption}}</span>
                                </button>
                            </h3>
                        </div>

                        <div id="collapse{{fact.id}}" class="collapse" aria-labelledby="heading{{fact.id}}" data-parent="#FAQ">
                            <div class="card-body" itemscope itemprop="acceptedAnswer" itemtype="https://schema.org/Answer">
                                <span itemprop="text">{{fact.text|safe}}</span>
                            </div>
                        </div>
                    </div>
                    {% endfor %}
                </div>
            </div>
        </div>
    </div>
</div>
{% endif %}

{# Downloads v3 #}
{% if files %}
<div class="bg-white" id="downloads">
    {# H2 #}
    {% include "partials/_h2.html" with h2="Скачать флаг "|add:flag.country.ru_name_rod|add:" в растровых и векторных форматах" %}
    {# Files #}
    <div class="py-3 pt-xl-4 pb-xl-5">
        <div class="container">
            <div class="row">
                {% for img in files %}
                <div class="col-12 col-xs-12">
                <div class="card mb-3">
                    <div class="row">
                        <div class="col-12 col-sm-4 col-md-2 d-flex justify-content-center align-items-center">
                            <div class="dl-img">
                                <picture itemscope itemtype="http://schema.org/ImageObject">
                                    <meta itemprop="name" content="{{img.alt}}">
                                    <meta itemprop="description" content="{{img.caption}}">
                                    <meta itemprop="width" content="{{img.image.width}}px">
                                    <meta itemprop="height" content="{{img.image.height}}px">

                                    <source type="image/webp" srcset="{{img.webp_xs.url}}, {{img.webp_md.url}} 2x">
                                    <source type="{{img.source_type}}" srcset="{{img.image_xs.url}}, {{img.image_md.url}} 2x">

                                    <img itemprop="contentUrl" src="{{img.image.url}}" alt="{{img.alt}}" title="{{img.caption}}" class="image" width="{{img.image.width}}" height="{{img.image.height}}">

                                </picture>
                            </div>
                        </div>

                        <div class="col-12 col-sm-8 col-md-10 col">
                            <div class="card-body">
                                <div class="card-text">
                                    {{img.description|safe}}
                                </div>

                                {% for elem in img.files.all %}
                                    <a href="{{elem.file.url}}" target="_blank" download class="btn btn-outline-primary btn-sm mb-2">
                                        {{elem.get_type|lower}} ({{elem.file.size|filesizeformat}})
                                    </a>
                                {% endfor %}

                            </div>
                        </div>
                    </div>
                </div>

                </div>
                {% endfor %}

                {% if files_count > 2 %}
                <div class="col-12 d-flex justify-content-center">
                    <a href="#" class="btn btn-outline-info btn-sm mx-2">Посмотреть все файлы ({{files_count}} шт.)</a>
                </div>
                {% endif %}
            </div>
        </div>
    </div>
</div>
{% endif %}

{# About country v2 #}
{% if flag.country.is_published %}
<div class="py-3 py-xl-5 bg-light" id="country">
    <div class="container">

        <h2 class="py-3">Краткая информация о {{flag.country.ru_name_pre}}</h2>
        <div class="row">
            <div class="py-3 col-12 col-md-8">
                <p>
                    {{flag.country.name}} занимает {{flag.country.area_global_rank}} место в мире по размерам.
                    Площадь территории страны {{flag.country.area_total|intcomma}} км<sup>2</sup>,
                    из которых {{flag.country.area_land|intcomma}} км<sup>2</sup> - суша. Протяженность береговой линии
                    {{flag.country.coastline|intcomma}} км.
                    По данным на {{flag.country.population_date}} год численность населения {{flag.country.ru_name_rod}}
                    около {{flag.country.population_total|intcomma}} человек - это {{flag.country.population_global_rank}} место в
                    мире.
                </p>
                <p>
                    Официальное название страны - {{flag.country.conventional_long_name}}.
                    Формой правления {{flag.country.ru_name_rod}} является {{flag.country.ru_government_type}}.
                    Глава государства - {{flag.country.ru_chief_of_state}}.
                    Главой правительства назначен {{flag.country.ru_head_of_government}}.
                </p>
                <p>
                    Официальный язык {{flag.country.ru_name_rod}} - {{flag.country.official_language}}.
                    На местном языке страна называется {{flag.country.local_long_name}}
                </p>
            </div>
            <div class="py-3 col-12 col-md-4">
                <table class="table table-striped table-sm table-bordered country_info">
                    <tbody>
                        <tr>
                            <th colspan="2" class="text-center">Важная информация</th>
                        </tr>
                        <tr>
                            <td>Регион</td>
                            <td>{{flag.country.region.parent}} - {{flag.country.region.name}}</td>
                        </tr>
                        <tr>
                            <td>Столица</td>
                            <td>{{flag.country.ru_capital_name}}</td>
                        </tr>
                        <tr>
                            <td>Валюта</td>
                            <td>
                                {% for cur in flag.country.currencies.all %}
                                {{cur.ru_name}} {{cur.symbol}} ({{cur.iso_code}}, {{cur.iso_num}})
                                {% endfor %}
                            </td>
                        </tr>
                        <tr>
                            <td>ISO 3166-1</td>
                            <td>{{flag.country.iso_code_a2}}, {{flag.country.iso_code_a3}}, {{flag.country.iso_code_num}}</td>
                        </tr>
                        <tr>
                            <td>Интернет-домен</td>
                            <td>{{flag.country.internet_tld}}</td>
                        </tr>
                        <tr>
                            <td>Телефонный код</td>
                            <td>+{{flag.country.phone_code}}</td>
                        </tr>
                    </tbody>
                </table>
                <table class="table table-striped table-sm table-bordered country_info">
                    <tbody>
                        <tr>
                            <th colspan="2" class="text-center">Экономика</th>
                        </tr>
                        <tr>
                            <td>ВВП (ППС) на душу</td>
                            <td>{{flag.country.gdp_value|intcomma}} $ ({{flag.country.gdp_date}})</td>
                        </tr>
                        <tr>
                            <td>Внешний долг</td>
                            <td>{{flag.country.external_debt_value|intcomma}} $ ({{flag.country.external_debt_date}})</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</div>
{% endif %}

{# Map v2 #}
<div class="py-3 py-xl-5 bg-white">
    <div class="container">
        <div class="row">
            <div class="col-12 col-md-4">
                <table class="table table-striped table-hover table-sm table-bordered country_info">
                    <thead>
                        <tr>
                            <th>Соседняя страна</th>
                            <th>Граница</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for neighbour in neighbours %}
                        <tr>
                            <th>{{neighbour.border_country}}</th>
                            <td>{{neighbour.border|in_km}}</td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
            <div class="col-12 col-md-8">
                <div id="svgMap"></div>
            </div>
        </div>
    </div>
</div>

{# Border countries flags v3 #}
{% if neighbours.exists %}
<div class="bg-light" id="border-flags">
    {# H2 #}
    {% include "partials/_h2.html" with h2="Флаги соседних с "|add:flag.country.ru_name_tvo|add:" стран" %}
    {# Flags list part #}
    {% include "partials/_flags-list.html" with flags=border_flags %}
</div>
{% endif %}

{# Copy color #}
<div class="position-fixed top-0 right-0 p-3" style="z-index: 1500; right: 0; top: 0;">
    <div id="copy" class="toast hide" role="alert" aria-live="assertive" aria-atomic="true" data-delay="2000">
        <div class="toast-header bg-success text-white">
            <strong class="mr-auto">Цвет скопирован в буфер!</strong>
            <button type="button" class="ml-2 mb-1 close" data-dismiss="toast" aria-label="Close">
                <span aria-hidden="true">&times;</span>
            </button>
        </div>
    </div>
</div>

<style>
    .svgMap-map-wrapper{
        background: #fff;
        color: #111;
        border: 1px solid #eee;
    }
    #svgMap-map-country-{{flag.country.iso_code_a2}} {
        fill: #28a745;
    }
</style>

{% endblock content %}
{% block inline_javascript %}

{% endblock inline_javascript %}
{# Begin SEO block #}
    {% block canonical %}{% url 'flags:flag-detail' flag.slug %}{% endblock canonical %}
    {% block meta_title %}{{flag.seo_title}}{% endblock meta_title %}

    {% block meta_description %}
        {% if flag.seo_description %}
            {{emoji}}{{flag.seo_description}}
        {% else %}
            {{colors_adj}}{{flag.country.iso_code_a2|adjective:"i"}} флаг{{emoji}}
        {% endif %}
        {% endblock meta_description %}
    {# {% block meta_keywords %}{{flag.seo_keywords}}{% endblock meta_keywords %} #}

    {% block meta_robots %}{% if flag.is_index %}index,{% else %}noindex,{% endif %}{% if flag.is_follow %}follow{% else %}nofollow{% endif %}{% endblock meta_robots %}
{# End SEO block #}
